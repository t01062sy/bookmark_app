# é–‹ç™ºå†é–‹ã‚¬ã‚¤ãƒ‰

**ä½œæˆæ—¥**: 2025å¹´8æœˆ10æ—¥  
**å¯¾è±¡**: ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã‚¢ãƒ—ãƒªé–‹ç™ºã®ä¸­æ–­ãƒ»å†é–‹  
**æ¬¡å›é–‹å§‹ãƒ•ã‚§ãƒ¼ã‚º**: Phase 2A Week 2 - OGP/oEmbedãƒ‘ãƒ¼ã‚µãƒ¼ãƒ»YouTube APIé€£æº

---

## ğŸ¯ ç¾åœ¨ã®é–‹ç™ºçŠ¶æ³

### âœ… å®Œäº†æ¸ˆã¿ï¼ˆPhase 1A + 1B + 2A Week 1ï¼‰
- **Phase 1A**: iOS ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—å®Œå…¨å®Ÿè£…
- **Phase 1B Week 1**: Supabase ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åŸºç›¤æ§‹ç¯‰  
- **Phase 1B Week 2**: Edge Functions APIå®Ÿè£…ï¼ˆPOST/GET bookmarksï¼‰
- **Phase 1B Week 3**: iOS ã‚¢ãƒ—ãƒª APIçµ±åˆãƒ»åŒæœŸæ©Ÿèƒ½
- **Phase 2A Week 1**: OpenAI APIçµ±åˆã¨LLMåŸºæœ¬æ©Ÿèƒ½å®Ÿè£…

### ğŸ–ï¸ é”æˆã—ãŸæ©Ÿèƒ½
1. **å®Œå…¨å‹•ä½œã™ã‚‹iOSã‚¢ãƒ—ãƒª**: iPhone 15 Pro (iOS 17.5) ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿å‹•ä½œç¢ºèªæ¸ˆã¿
2. **æœ¬ç•ªç¨¼åƒAPI**: Supabase Edge Functions ã§ POST/GET/LLMå‡¦ç†ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆç¨¼åƒä¸­
3. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ**: Swift Data â†” Supabase åŒæ–¹å‘ãƒ‡ãƒ¼ã‚¿åŒæœŸ
4. **LLMæ©Ÿèƒ½**: OpenAI GPT-4o-minié€£æºãƒ»æ—¥æœ¬èªè¦ç´„ãƒ»åˆ†é¡ãƒ»ã‚¿ã‚°ä»˜ã‘å‹•ä½œç¢ºèªæ¸ˆã¿
5. **åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆ**: å…¨æ©Ÿèƒ½ã®CRUDãƒ»æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ»LLMå‡¦ç†å‹•ä½œç¢ºèªæ¸ˆã¿

---

## ğŸš€ æ¬¡å›é–‹ç™ºé–‹å§‹æ‰‹é †

### Step 1: ç’°å¢ƒç¢ºèªï¼ˆ5åˆ†ï¼‰

#### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ…‹ç¢ºèª
```bash
# ãƒªãƒã‚¸ãƒˆãƒªç§»å‹•
cd /Users/shohei.yoneda/playground/bookmark_app

# æœ€æ–°çŠ¶æ…‹ç¢ºèª
git status
git log --oneline -5

# Supabase APIå‹•ä½œç¢ºèª
curl -X GET 'https://ieuurvmlrgkxfetfnlnp.supabase.co/functions/v1/bookmarks-list' \
  -H 'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlldXVydm1scmdreGZldGZubG5wIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ4MDkyNTksImV4cCI6MjA3MDM4NTI1OX0.VPYLmJsdgnLvSBZNmAaDbod3ecWbTtIc0fDneGvgO-E'
```

#### iOSã‚¢ãƒ—ãƒªå‹•ä½œç¢ºèª
```bash
# iOS ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿èµ·å‹•
xcrun simctl boot "iPhone 15 Pro"
open -a Simulator

# ã‚¢ãƒ—ãƒªãƒ“ãƒ«ãƒ‰ãƒ»èµ·å‹•ãƒ†ã‚¹ãƒˆ
cd ios/BookmarkApp
xcodebuild -project BookmarkApp.xcodeproj -scheme BookmarkApp \
  -configuration Debug -sdk iphonesimulator \
  -destination "platform=iOS Simulator,name=iPhone 15 Pro,OS=17.5" \
  build
```

### Step 2: Phase 2A é–‹å§‹æº–å‚™ï¼ˆ30åˆ†ï¼‰

#### OpenAI APIæº–å‚™
1. **OpenAI ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç¢ºèª**
   - https://platform.openai.com ã«ãƒ­ã‚°ã‚¤ãƒ³
   - API ã‚­ãƒ¼ä½œæˆãƒ»å–å¾—
   - èª²é‡‘è¨­å®šç¢ºèªï¼ˆ$30/æœˆä¸Šé™è¨­å®šï¼‰

2. **ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒè¨­å®š**
```bash
# .secrets ãƒ•ã‚¡ã‚¤ãƒ«ã« OpenAI ã‚­ãƒ¼è¿½åŠ 
echo "OPENAI_API_KEY=sk-..." >> .secrets
echo "OPENAI_ORGANIZATION_ID=org-..." >> .secrets  # å¿…è¦ã«å¿œã˜ã¦
```

#### é–‹ç™ºè¨ˆç”»ç¢ºèª
```bash
# æœ€æ–°ã®é–‹ç™ºè¨ˆç”»æ›¸ç¢ºèª
cat é–‹ç™ºè¨ˆç”»æ›¸.md | grep -A 20 "Phase 2A"

# Edge Functions ã‚¬ã‚¤ãƒ‰ç¢ºèª
cat docs/setup/edge-functions-guide.md
```

### Step 3: Phase 2A Week 2 å®Ÿè£…é–‹å§‹

#### æœ€å„ªå…ˆã‚¿ã‚¹ã‚¯
1. **OGP/oEmbed ãƒ‘ãƒ¼ã‚µãƒ¼å®Ÿè£…** (1-2æ—¥)
   - URL ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å–å¾—æ©Ÿèƒ½
   - YouTube Data API é€£æºæº–å‚™
   - æœ¬æ–‡æŠ½å‡ºï¼ˆReadability.js ç›¸å½“ï¼‰

2. **ã‚³ã‚¹ãƒˆç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ** (1æ—¥)
   - OpenAI API ä½¿ç”¨é‡è¿½è·¡
   - $1/æ—¥ã€$30/æœˆ ä¸Šé™ãƒã‚§ãƒƒã‚¯
   - Supabase Functions ã§ã®å®Ÿè£…

3. **è‡ªå‹•LLMå‡¦ç†çµ±åˆ** (1-2æ—¥)
   - ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ä¿å­˜æ™‚ã®è‡ªå‹•LLMå‡¦ç†å‘¼ã³å‡ºã—
   - iOS ã‚¢ãƒ—ãƒªã§ã®LLMå‡¦ç†çŠ¶æ³è¡¨ç¤º
   - ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å‡¦ç†ãƒ»ã‚¨ãƒ©ãƒ¼å›å¾©æ©Ÿèƒ½

---

## ğŸ“ é‡è¦ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ‘ã‚¹

### ğŸ”‘ èªè¨¼ãƒ»è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
```
.secrets                          # Supabase + OpenAI API ã‚­ãƒ¼
supabase/.env                     # Edge Functions ç’°å¢ƒå¤‰æ•°
```

### ğŸ› ï¸ å®Ÿè£…æ¸ˆã¿ã‚³ãƒ¼ãƒ‰
```
ios/BookmarkApp/BookmarkApp/
â”œâ”€â”€ Services/
â”‚   â”œâ”€â”€ BookmarkAPIClient.swift   # HTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â””â”€â”€ BookmarkSyncService.swift # ãƒ‡ãƒ¼ã‚¿åŒæœŸ
â”œâ”€â”€ Models/Bookmark.swift         # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
â””â”€â”€ Views/                        # å…¨UIï¼ˆAPIçµ±åˆæ¸ˆã¿ï¼‰

supabase/functions/
â”œâ”€â”€ bookmarks-create/index.ts     # POST API
â”œâ”€â”€ bookmarks-list/index.ts       # GET API
â””â”€â”€ llm-process/index.ts          # LLMå‡¦ç†API
```

### ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
```
docs/setup/
â”œâ”€â”€ supabase-setup-guide.md       # Supabase æ§‹ç¯‰ã‚¬ã‚¤ãƒ‰
â”œâ”€â”€ edge-functions-guide.md       # API å®Ÿè£…ã‚¬ã‚¤ãƒ‰
â””â”€â”€ secrets-management.md         # èªè¨¼æƒ…å ±ç®¡ç†

é–‹ç™ºè¨ˆç”»æ›¸.md                      # å…¨ä½“ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—
```

---

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

#### 1. Supabase API æ¥ç¶šã‚¨ãƒ©ãƒ¼
```bash
# API ã‚­ãƒ¼ç¢ºèª
grep "SUPABASE_ANON_KEY" .secrets

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ…‹ç¢ºèª
curl -X GET 'https://ieuurvmlrgkxfetfnlnp.supabase.co/rest/v1/bookmarks?select=*' \
  -H 'apikey: [ANON_KEY]'
```

#### 2. iOS ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿å•é¡Œ
```bash
# æ¨å¥¨: iPhone 15 Pro (iOS 17.5) ä½¿ç”¨
xcrun simctl list devices | grep "iPhone 15 Pro"
xcrun simctl boot "iPhone 15 Pro"

# äº’æ›æ€§ã‚¨ãƒ©ãƒ¼æ™‚ã¯ iOS 17.5 ãƒ‡ãƒã‚¤ã‚¹é¸æŠ
```

#### 3. Edge Functions ãƒ‡ãƒ—ãƒ­ã‚¤å•é¡Œ
```bash
# ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ç¢ºèª
supabase --version
# å¿…è¦ã«å¿œã˜ã¦å†ãƒ‡ãƒ—ãƒ­ã‚¤
supabase functions deploy --project-ref ieuurvmlrgkxfetfnlnp
```

---

## ğŸ“Š æˆåŠŸæŒ‡æ¨™ï¼ˆç¾åœ¨é”æˆçŠ¶æ³ï¼‰

### âœ… Phase 1B + 2A Week 1 é”æˆæ¸ˆã¿
- [x] **APIå¿œç­”æ™‚é–“**: P95 < 3ç§’ âœ…
- [x] **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š**: å®‰å®šå‹•ä½œ âœ…  
- [x] **iOS ã‚¢ãƒ—ãƒªèµ·å‹•**: <1ç§’ âœ…
- [x] **åŸºæœ¬CRUD**: å…¨æ©Ÿèƒ½å‹•ä½œ âœ…
- [x] **LLMå‡¦ç†æ©Ÿèƒ½**: OpenAI GPT-4o-mini é€£æºå®Œäº† âœ…

### ğŸ¯ Phase 2A Week 2 ç›®æ¨™
- [x] **LLMå‡¦ç†æˆåŠŸç‡**: â‰¥ 95% âœ… (åŸºæœ¬æ©Ÿèƒ½å®Œäº†)
- [ ] **è¦ç´„ç”Ÿæˆæ™‚é–“**: P95 < 20ç§’ (è‡ªå‹•å‡¦ç†çµ±åˆå¾Œã«æ¸¬å®š)
- [ ] **æ—¥æ¬¡LLMã‚³ã‚¹ãƒˆ**: < $1.00 (ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…å¿…è¦)
- [ ] **æœˆæ¬¡é‹ç”¨ã‚³ã‚¹ãƒˆ**: < $30 (ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…å¿…è¦)
- [ ] **OGP/oEmbedãƒ‘ãƒ¼ã‚µãƒ¼**: ä¸»è¦ã‚µã‚¤ãƒˆå¯¾å¿œå®Œäº†
- [ ] **è‡ªå‹•å‡¦ç†çµ±åˆ**: ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ä¿å­˜æ™‚LLMå‡¦ç†å®Ÿè¡Œ

---

## ğŸ¯ MVPå®Œæˆã¾ã§ã®è¦‹ç©ã‚‚ã‚Š

### æ®‹ã‚Šä½œæ¥­ï¼ˆ4-6é€±é–“ï¼‰
1. **Phase 2A (LLM)**: 2-3é€±é–“
2. **Phase 2B (æ¤œç´¢å¼·åŒ–)**: 1-2é€±é–“  
3. **Phase 3A (Web PWA)**: 3-4é€±é–“
4. **Phase 4A (ä»•ä¸Šã’)**: 1é€±é–“

### æœ€çŸ­ãƒ«ãƒ¼ãƒˆï¼ˆ4é€±é–“ï¼‰
- **Week 1**: OpenAIçµ±åˆ + LLMåŸºæœ¬æ©Ÿèƒ½
- **Week 2**: å“è³ªå‘ä¸Š + é«˜åº¦æ¤œç´¢
- **Week 3**: Web PWA åŸºæœ¬å®Ÿè£…
- **Week 4**: æœ€çµ‚ä»•ä¸Šã’ãƒ»æœ¬ç•ªæº–å‚™

---

## ğŸ”¥ å³åº§é–‹å§‹å¯èƒ½

**ã™ã¹ã¦ã®ã‚¤ãƒ³ãƒ•ãƒ©ãƒ»LLMåŸºç›¤ã¯æ•´ã£ã¦ã„ã¾ã™ï¼**

1. âœ… OpenAI API ã‚­ãƒ¼å–å¾—ãƒ»è¨­å®šå®Œäº†
2. âœ… `supabase/functions/llm-process/` å®Ÿè£…å®Œäº†
3. âœ… åŸºæœ¬LLMçµ±åˆå®Œäº†

**æ¬¡å›é–‹ç™ºæ™‚é–“**: æœ€ä½2-3æ™‚é–“ã‚ã‚Œã° Phase 2A Week 2 ã® OGP/oEmbedãƒ‘ãƒ¼ã‚µãƒ¼ã«ç€æ‰‹å¯èƒ½

**ğŸš€ ã„ã¤ã§ã‚‚é–‹ç™ºå†é–‹ã§ãã‚‹çŠ¶æ…‹ã§ã™ï¼**